<%= render @report %>

<div>
  <% if current_user.id == @report.user_id %>
    <%= link_to "Edit this report", edit_report_path(@report) %> |
    <%= link_to "Back to reports", reports_path %>

    <%= button_to "Destroy this report", @report, method: :delete %>
  <% else %>
    <%= link_to "Back to reports", reports_path %>
  <% end %>
</div>

<h2>Comments</h2>
  <%= "コメントはありません" if @report.comments.blank? %>
  
  <% @comments.each do |comment| %>
  <div>
    <%= comment.user_id.nil? ? "退会済みユーザー" : User.all.find(comment.user_id).name %><br>
    <%= comment.created_at %><br>
    <%= comment.content %>
  </div>
  <hr>
  <% end %>

<%= render partial: 'comments/form', locals: { commentable: @report } %>
